<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UTERNITY - Your Gateway to Global Education</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        * { box-sizing: border-box; }
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            color: #1f2937;
            overflow-x: hidden;
        }

        .page {
            min-height: 100vh;
            display: grid;
            grid-template-columns: 1fr 1fr;
            position: relative;
        }

        /* Decorative diagonal background that NEVER clips content */
        .diagonal-bg {
            position: absolute;
            inset: 0 auto 0 0;
            width: 58vw;
            background: linear-gradient(135deg, #8b5cf6 0%, #06b6d4 100%);
            clip-path: polygon(0 0, 86% 0, 72% 100%, 0 100%);
            z-index: 0;
        }
        /* subtle moving highlight controlled by CSS variables --x/--y */
        .diagonal-bg::after {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at var(--x, 30%) var(--y, 30%), rgba(255,255,255,0.10), transparent 45%);
            transition: transform .15s ease;
            pointer-events: none;
        }

        /* (Removed floating accent squares to avoid overlap with cards) */

        /* Left content sits ABOVE the diagonal background */
        .left {
            position: relative;
            z-index: 1;
            padding: 64px 40px 64px 64px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            color: #fff;
        }
        .brand {
            max-width: 560px;
        }
        .logo-box {
            width: 96px; height: 96px;
            border-radius: 24px;
            background: rgba(255,255,255,0.14);
            border: 2px solid rgba(255,255,255,0.28);
            display: grid; place-items: center;
            margin-bottom: 24px;
            position: relative; overflow: hidden;
        }
        .logo-box::after {
            content: '';
            position: absolute; inset: -40% -40% auto auto;
            background: radial-gradient(closest-side, rgba(255,255,255,0.55), transparent 70%);
            width: 140%; height: 140%; transform: rotate(25deg);
            opacity: .6;
        }
        .brand h1 {
            font-size: 56px; line-height: 1.05; letter-spacing: 0.2px;
            font-weight: 800; margin: 0 0 10px 0;
            background: linear-gradient(45deg, #ffffff, #e6ecff);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
            text-shadow: 0 8px 26px rgba(0,0,0,0.18);
        }
        .brand p { font-size: 18px; opacity: .95; margin: 0 0 32px 0; }

        /* Decorative floating app icons (non-blocking) */
        .decor-icons { position: absolute; inset: 0; pointer-events: none; z-index: 0; }
        .icon-bubble {
            position: absolute; display: grid; place-items: center; color: #fff;
            width: 52px; height: 52px; border-radius: 16px; opacity: .18;
            background: linear-gradient(135deg, rgba(255,255,255,0.5), rgba(255,255,255,0.12));
            border: 1px solid rgba(255,255,255,0.35);
            box-shadow: 0 12px 28px rgba(0,0,0,0.18);
            animation: drift 12s ease-in-out infinite;
        }
        .icon-bubble i { filter: drop-shadow(0 2px 6px rgba(0,0,0,0.25)); }
        .icon-bubble.b1 { top: 12%; left: 20%; animation-delay: 0s; }
        .icon-bubble.b2 { top: 8%; left: 44%; width: 58px; height: 58px; animation-delay: 1.2s; }
        .icon-bubble.b3 { top: 46%; left: 10%; animation-delay: 2.4s; }
        .icon-bubble.b4 { top: 68%; left: 34%; animation-delay: 3.6s; }
        @keyframes drift { 0%,100%{ transform: translateY(0) translateX(0); } 50%{ transform: translateY(-14px) translateX(8px); } }

        /* Ambient spark particles */
        .spark { position: absolute; width: 4px; height: 4px; border-radius: 9999px; background: rgba(255,255,255,0.55); box-shadow: 0 0 12px rgba(255,255,255,0.8); opacity: .0; pointer-events: none; z-index: 0; animation: spark 12s linear infinite; }
        @keyframes spark { 0% { opacity: .0; transform: translate3d(0, 20px, 0) scale(.8); } 10% { opacity: .5; } 50% { opacity: .9; } 100% { opacity: 0; transform: translate3d(0, -80px, 0) scale(1.05); } }

        .features {
            display: grid; grid-template-columns: repeat(2, minmax(220px, 1fr)); gap: 18px; max-width: 560px;
        }
        .feature {
            position: relative;
            background: rgba(255,255,255,0.16);
            border: 1px solid rgba(255,255,255,0.25);
            border-radius: 18px; padding: 24px 20px; text-align: center;
            transition: transform .25s ease, box-shadow .25s ease, background .25s ease, border-color .25s ease;
            overflow: hidden;
            opacity: 0; animation: fadeUp .7s ease forwards;
        }
        .features .feature:nth-child(1){ animation-delay: .05s; }
        .features .feature:nth-child(2){ animation-delay: .15s; }
        .features .feature:nth-child(3){ animation-delay: .25s; }
        .features .feature:nth-child(4){ animation-delay: .35s; }
        @keyframes fadeUp { from { opacity: 0; transform: translateY(14px); } to { opacity: 1; transform: translateY(0); } }
        .feature::after {
            content: '';
            position: absolute; inset: 0; pointer-events: none;
            background: radial-gradient(120px 60px at -20% 0%, rgba(255,255,255,0.25), transparent 60%),
                        radial-gradient(120px 60px at 120% 100%, rgba(255,255,255,0.18), transparent 60%);
            opacity: .6;
        }
        .feature:hover {
            transform: translateY(-6px) rotateX(2deg) rotateY(1deg);
            background: rgba(255,255,255,0.22);
            box-shadow: 0 18px 40px rgba(0,0,0,0.18);
            border-color: rgba(255,255,255,0.35);
        }

        .icon-wrap {
            width: 56px; height: 56px; margin: 0 auto 12px auto;
            border-radius: 14px; display: grid; place-items: center;
            background: linear-gradient(135deg, rgba(255,255,255,0.45), rgba(255,255,255,0.15));
            box-shadow: inset 0 0 0 1px rgba(255,255,255,0.4), 0 10px 24px rgba(0,0,0,0.15);
            transition: transform .25s ease, box-shadow .25s ease;
            animation: iconPulse 4s ease-in-out infinite;
        }
        .feature:hover .icon-wrap { transform: translateY(-2px); box-shadow: inset 0 0 0 1px rgba(255,255,255,0.55), 0 16px 30px rgba(0,0,0,0.2); }

        .feature i { font-size: 22px; filter: drop-shadow(0 2px 6px rgba(0,0,0,0.25)); }
        @keyframes iconPulse { 0%,100%{ transform: scale(1); } 50%{ transform: scale(1.06); } }
        .feature h3 { margin: 6px 0 6px 0; font-size: 16px; font-weight: 700; }
        .feature p { margin: 0; font-size: 13px; opacity: .95; }

        /* Right side form */
        .right { display: grid; place-items: center; padding: 40px; }
        .card {
            width: 100%; max-width: 460px; background: #fff;
            border-radius: 24px; border: 1px solid rgba(139,92,246,0.12);
            box-shadow: 0 30px 60px rgba(0,0,0,0.12);
            padding: 34px 28px; position: relative; overflow: hidden;
        }
        .card::before { content: ''; position: absolute; inset: 0 0 auto 0; height: 4px; background: linear-gradient(135deg, #8b5cf6 0%, #06b6d4 100%); }
        .card::after { content: ''; position: absolute; inset: 0; border-radius: 24px; padding: 1px; background: conic-gradient(from 0deg, rgba(139,92,246,.28), rgba(6,182,212,.28), rgba(139,92,246,.28)); -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite: xor; mask-composite: exclude; animation: ring 8s linear infinite; pointer-events: none; }
        @keyframes ring { to { transform: rotate(360deg); } }
        .card h2 { font-size: 32px; margin: 10px 0 6px 0; font-weight: 800; color: #111827; text-align: center; animation: breathe 4s ease-in-out infinite; }
        @keyframes breathe { 0%,100% { transform: translateZ(0) scale(1); text-shadow: 0 0 0 rgba(17,24,39,0); } 50% { transform: translateZ(0) scale(1.01); text-shadow: 0 6px 18px rgba(17,24,39,0.08); } }
        .card .sub { text-align: center; color: #6b7280; margin-bottom: 22px; }

        .tabs { position: relative; display: flex; gap: 8px; background: #f3f4f6; padding: 6px; border-radius: 14px; margin: 0 0 22px 0; }
        .tabs .indicator { position: absolute; top: 6px; left: 6px; width: calc(50% - 6px); height: calc(100% - 12px); background: linear-gradient(135deg,#8b5cf6,#06b6d4); border-radius: 10px; transition: transform .3s ease; box-shadow: 0 6px 18px rgba(139,92,246,.3); }
        .tabs .indicator.to-register { transform: translateX(100%); }
        .tab { flex: 1; background: transparent; border: 0; padding: 12px 14px; font-weight: 700; color: #6b7280; border-radius: 10px; position: relative; z-index: 1; cursor: pointer; }
        .tab.active { color: #fff; }

        .group { margin-bottom: 16px; }
        label { display: block; font-weight: 700; color: #374151; margin-bottom: 8px; font-size: 14px; }
        .input { width: 100%; padding: 16px 18px; border-radius: 14px; border: 2px solid #e5e7eb; background: #fafafa; transition: all .25s ease; font-size: 15px; }
        .input:focus { outline: none; background: #fff; border-color: #8b5cf6; box-shadow: 0 0 0 4px rgba(139,92,246,0.12); transform: translateY(-2px); }
        .cta { width: 100%; padding: 16px 20px; border: 0; border-radius: 14px; color: #fff; font-weight: 800; font-size: 15px; letter-spacing: .4px; cursor: pointer; background: linear-gradient(135deg, #8b5cf6, #06b6d4); transition: transform .25s ease, box-shadow .25s ease; position: relative; overflow: hidden; }
        .cta::before { content: ''; position: absolute; inset: 0; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.22), transparent); transform: translateX(-100%); }
        .cta:hover::before { transform: translateX(100%); transition: transform .8s ease; }
        .cta:hover { transform: translateY(-2px); box-shadow: 0 16px 34px rgba(139,92,246,0.35); }
        .cta[disabled] { opacity: .7; cursor: not-allowed; transform: none; box-shadow: none; }
        .cta .ripple { position: absolute; border-radius: 9999px; transform: translate(-50%,-50%); pointer-events: none; background: rgba(255,255,255,0.35); width: 20px; height: 20px; animation: ripple .6s ease-out forwards; }
        @keyframes ripple { from { opacity: .7; transform: translate(-50%,-50%) scale(1); } to { opacity: 0; transform: translate(-50%,-50%) scale(18); } }
        .msg { margin: 12px 0 16px 0; padding: 12px 14px; border-radius: 10px; font-weight: 600; display: none; }
        .msg.show { display: block; }
        .msg.error { background: #fee2e2; color: #991b1b; border: 1px solid #fca5a5; }
        .msg.success { background: linear-gradient(135deg, rgba(139,92,246,.12), rgba(6,182,212,.12)); color: #065f46; border: 1px solid rgba(139,92,246,.25); }

        @media (max-width: 1024px) {
            .page { grid-template-columns: 1.1fr 0.9fr; }
            .diagonal-bg { width: 64vw; clip-path: polygon(0 0, 88% 0, 70% 100%, 0 100%); }
        }
        @media (max-width: 820px) {
            .page { grid-template-columns: 1fr; }
            .diagonal-bg { width: 100%; height: 54vh; clip-path: none; border-bottom-right-radius: 42px; border-bottom-left-radius: 42px; }
            .left { padding: 48px 28px; min-height: 54vh; }
            .right { padding: 28px 20px 48px 20px; }
            .brand h1 { font-size: 40px; }
            .features { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="page">
        <div class="diagonal-bg"></div>

        <section class="left">
            <div class="decor-icons">
                <div class="icon-bubble b1"><i class="fas fa-graduation-cap"></i></div>
                <div class="icon-bubble b2"><i class="fas fa-globe"></i></div>
                <div class="icon-bubble b3"><i class="fas fa-university"></i></div>
                <div class="icon-bubble b4"><i class="fas fa-plane"></i></div>
            </div>
            <div class="brand">
                <div class="logo-box">
                    <svg viewBox="0 0 24 24" width="42" height="42" fill="none" stroke="#ffffff" stroke-width="2">
                        <path d="M12 4L4 8L12 12L20 8L12 4Z"></path>
                        <path d="M4 12L12 16L20 12"></path>
                        <path d="M4 16L12 20L20 16"></path>
                    </svg>
                </div>
                <h1>UTERNITY</h1>
                <p>Your Gateway to Global Education</p>
                <div class="features">
                    <div class="feature">
                        <div class="icon-wrap"><i class="fas fa-search"></i></div>
                        <h3>Discover</h3>
                        <p>Find your perfect university match worldwide</p>
                    </div>
                    <div class="feature">
                        <div class="icon-wrap"><i class="fas fa-pen-fancy"></i></div>
                        <h3>Apply</h3>
                        <p>Craft compelling applications that stand out</p>
                    </div>
                    <div class="feature">
                        <div class="icon-wrap"><i class="fas fa-calculator"></i></div>
                        <h3>Plan</h3>
                        <p>Calculate costs & create smart budgets</p>
                    </div>
                    <div class="feature">
                        <div class="icon-wrap"><i class="fas fa-trophy"></i></div>
                        <h3>Succeed</h3>
                        <p>Ace tests & interviews with confidence</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="right">
            <div class="card">
                <h2>Welcome Back</h2>
                <div class="sub">Continue your journey to global education</div>

                <div class="tabs">
                    <div class="indicator" id="tabIndicator"></div>
                    <button class="tab active" onclick="switchTab(event, 'login')">Sign In</button>
                    <button class="tab" onclick="switchTab(event, 'register')">Get Started</button>
                </div>

                <div id="msg" class="msg"></div>

                <form id="loginForm">
                    <div class="group">
                        <label for="loginEmail">Email Address</label>
                        <input id="loginEmail" type="email" class="input" placeholder="Enter your email" required>
                    </div>
                    <div class="group">
                        <label for="loginPassword">Password</label>
                        <input id="loginPassword" type="password" class="input" placeholder="Enter your password" required>
                    </div>
                    <button type="submit" class="cta">Continue Your Journey</button>
                </form>

                <form id="registerForm" style="display:none;">
                    <div class="group">
                        <label for="registerName">Full Name</label>
                        <input id="registerName" type="text" class="input" placeholder="Your full name" required>
                    </div>
                    <div class="group">
                        <label for="registerEmail">Email Address</label>
                        <input id="registerEmail" type="email" class="input" placeholder="your.email@example.com" required>
                    </div>
                    <div class="group">
                        <label for="registerPassword">Password</label>
                        <input id="registerPassword" type="password" class="input" placeholder="Create a strong password" required>
                    </div>
                    <div class="group">
                        <label for="confirmPassword">Confirm Password</label>
                        <input id="confirmPassword" type="password" class="input" placeholder="Confirm your password" required>
                    </div>
                    <button type="submit" class="cta">Start Your Journey</button>
                </form>
            </div>
        </section>
    </div>

    <script>
        // Parallax highlight on diagonal background
        document.addEventListener('mousemove', (e) => {
            const bg = document.querySelector('.diagonal-bg');
            if (!bg) return;
            const x = (e.clientX / window.innerWidth) * 100;
            const y = (e.clientY / window.innerHeight) * 100;
            bg.style.setProperty('--x', x + '%');
            bg.style.setProperty('--y', y + '%');
        });

        function showMsg(type, text) {
            const el = document.getElementById('msg');
            el.className = 'msg show ' + (type === 'error' ? 'error' : 'success');
            el.textContent = text;
            window.setTimeout(() => { el.className = 'msg'; el.textContent=''; }, 5000);
        }

        function switchTab(ev, tab) {
            const indicator = document.getElementById('tabIndicator');
            const loginForm = document.getElementById('loginForm');
            const registerForm = document.getElementById('registerForm');
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            ev.target.classList.add('active');
            if (tab === 'register') {
                indicator.classList.add('to-register');
                loginForm.style.display = 'none';
                registerForm.style.display = 'block';
            } else {
                indicator.classList.remove('to-register');
                registerForm.style.display = 'none';
                loginForm.style.display = 'block';
            }
            document.getElementById('msg').className = 'msg';
            document.getElementById('msg').textContent = '';
        }

        class UternityAuth {
            constructor() {
                this.apiBaseUrl = 'http://localhost:8080';
                this.init();
            }
            init() {
                // if already authenticated
                if (localStorage.getItem('access_token')) {
                    window.location.href = '/pages/app/dashboard.html';
                    return;
                }
                document.getElementById('loginForm').addEventListener('submit', (e) => this.handleLogin(e));
                document.getElementById('registerForm').addEventListener('submit', (e) => this.handleRegister(e));
                // attach ripple to primary CTAs
                document.querySelectorAll('.cta').forEach(btn => {
                    btn.addEventListener('click', (ev) => {
                        const r = document.createElement('span');
                        r.className = 'ripple';
                        r.style.left = ev.offsetX + 'px';
                        r.style.top = ev.offsetY + 'px';
                        btn.appendChild(r);
                        setTimeout(() => r.remove(), 650);
                    });
                });
            }
            async handleLogin(e) {
                e.preventDefault();
                const email = document.getElementById('loginEmail').value.trim();
                const password = document.getElementById('loginPassword').value;
                if (!email || !password) { showMsg('error', 'Please fill in all fields'); return; }
                const btn = e.submitter; if (btn) btn.disabled = true;
                try {
                    const res = await fetch(`${this.apiBaseUrl}/api/auth/login`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ email, password }) });
                    const data = await res.json();
                    if (res.ok && data.success) {
                        localStorage.setItem('access_token', data.token);
                        localStorage.setItem('uternity_user', JSON.stringify(data.user));
                        showMsg('success', 'Welcome back! Redirecting...');
                        setTimeout(() => { window.location.href = '/pages/app/dashboard.html'; }, 1200);
                    } else {
                        let errorMsg = data.message || 'Invalid credentials';
                        showMsg('error', errorMsg);
                    }
                } catch (err) {
                    showMsg('error', 'Connection error. Please try again.');
                } finally { if (btn) btn.disabled = false; }
            }
            async handleRegister(e) {
                e.preventDefault();
                const name = document.getElementById('registerName').value.trim();
                const email = document.getElementById('registerEmail').value.trim();
                const password = document.getElementById('registerPassword').value;
                const confirm = document.getElementById('confirmPassword').value;
                if (!name || !email || !password || !confirm) { showMsg('error', 'Please fill in all fields'); return; }
                if (password !== confirm) { showMsg('error', 'Passwords do not match'); return; }
                if (password.length < 6) { showMsg('error', 'Password must be at least 6 characters'); return; }
                if (!/(?=.*[!@#$%^&*(),.?":{}|<>])/.test(password)) { showMsg('error', 'Password must contain at least one special character'); return; }
                
                const btn = e.submitter; if (btn) btn.disabled = true;
                try {
                    const res = await fetch(`${this.apiBaseUrl}/api/auth/register`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ name, email, password }) });
                    const data = await res.json();
                    if (res.ok && data.success) {
                        showMsg('success', 'Welcome to UTERNITY! Please sign in with your new account.');
                        // Switch to login tab
                        switchTab({target: document.querySelector('.tab')}, 'login');
                    } else {
                        let errorMsg = data.message || 'Registration failed';
                        if (data.detail) {
                            if (Array.isArray(data.detail)) {
                                errorMsg = data.detail.map(err => err.msg).join(', ');
                            } else if (typeof data.detail === 'string') {
                                errorMsg = data.detail;
                            }
                        }
                        showMsg('error', errorMsg);
                    }
                } catch (err) {
                    showMsg('error', 'Connection error. Please try again.');
                } finally { if (btn) btn.disabled = false; }
            }
        }

        document.addEventListener('DOMContentLoaded', () => { new UternityAuth(); });
    </script>
</body>
</html>


